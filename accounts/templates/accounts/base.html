{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <style>
        /* Only the minimal necessary styles */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        .tippy-box {
            position: relative;
            pointer-events: none;
            padding: 0;
            border-radius: 4px;
            background: transparent;
        }

        .tippy-box img {
            max-width: 200px;
            height: auto;
            display: block;
            border-radius: 4px;
        }

        .hover-link:hover + .tooltip, .tooltip:hover {
            display: block;
        }

        .tooltip {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #ccc;
            padding: 8px;
            display: none;
            min-width: 200px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 50000;
        }
    </style>
{% endblock %}

{% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/tippy.js@6/dist/tippy-bundle.umd.min.js"
            integrity="sha384-AiTRpehQ7zqeua0Ypfa6Q4ki/ddhczZxrKtiQbTQUlJIhBkTeyoZP9/W/5ulFt29"
            crossorigin="anonymous"></script>
{% endblock %}

{% block inline_js %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            tippy('.tooltip-link', {
                content: 'Loading...',
                allowHTML: true,
                interactive: true,
                placement: 'right',
                onShow(instance) {
                    const url = instance.reference.dataset.url;
                    fetch(`/items/api/${encodeURIComponent(url)}`)
                        .then(response => response.text())
                        .then(content => {
                            instance.setContent(content);
                        })
                        .catch(error => {
                            instance.setContent(`Failed to load data: ${error}`);
                        });
                }
            });
        });
    </script>
{% endblock %}